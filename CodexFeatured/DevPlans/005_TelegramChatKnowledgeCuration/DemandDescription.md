# 开发需求文档：Telegram 聊天知识化整理与客服问答支持

标识信息：INTENT_TITLE_2_4=TelegramChatKnowledgeCuration；COUNT_3D=005；生成时间=2025-10-11 17:56:02
输出路径（模板）：D:/AI_Projects/CodexFeatured/DevPlans/005_TelegramChatKnowledgeCuration/DemandDescription.md

---

## 第1节：项目背景与目标
- 背景说明：现有 Telegram 聊天记录体量较大且内容杂乱，包含客户沟通、价格信息、业务解释与自由聊天，缺乏可直接服务业务的结构化资产。
- 目标陈述：将聊天记录转化为结构化、可检索、可审计的业务知识与问答素材，支撑后续客服问答、报价引导、信息收集与话术风格一致性控制。
- 受众识别：业务负责人、运营与客服、数据标注/质检同学、下游 DevPipelineGeneration 工作流的技术负责人。
- 非技术目标：提升知识复用效率与客户响应一致性；沉淀报价口径与业务解释；缩短新同事掌握业务的学习曲线；为自动化客服与报价能力打下数据与规则基础。

---

## 第2节：业务场景分析
- 典型场景（示例 4 个）：
  1) 新线索首次咨询：系统从知识库中给出标准话术与关键信息收集清单；
  2) 老客户追问价格或变更需求：系统给出最近一次有效报价与差异说明；
  3) 内部复盘与培训：按主题/客户/时间段导出对话节选与业务要点；
  4) 运营巡检：按周期生成“问题集中点/易混淆点/高频拒答点”报告。
- 输入与输出：输入为 Telegram 导出的原始聊天文件；输出为结构化知识条目、术语表、主题聚类、可检索片段与标准问答样例集。
- 运行方式与频率：
  - 初次全量整理（一次性/按批次）；
  - 增量更新（按周或当有新导出时触发）；
  - 日常问答检索（按需实时）。
- 边界设定（不做）：不直接决定最终成交价格；不进行任何自动对外发送；不替代人工合规审查。

---

## 第3节：功能需求描述
- 功能范围（业务语言）：
  - 原始对话清单整理：识别会话、参与方、时间线与消息类型；
  - 垃圾/噪声剔除：移除纯表情/贴纸/系统消息/无业务价值片段；
  - 主题与意图归类：基于对话语义生成主题、意图与子议题标签；
  - 业务要点抽取：抽取报价口径、产品/服务条款、交付范围、时效与例外；
  - 问答素材沉淀：从高质量对话中形成标准问—答样例与可复用话术；
  - 术语与同义词表：统一业务名词、价格口径与常见缩写映射；
  - 可检索片段生成：为问答检索准备带主题/来源/时间戳的片段条目；
  - 合规与风格约束：定义可见敏感字段范围与回复语气/禁用表达清单；
  - 导入与增量更新：支持全量导入与按时间窗口增量补充；
  - 报告输出：生成“知识沉淀概览/高频问题/易错点/空白点”报告。
- 业务价值：统一口径、提升响应一致性与效率、沉淀可复用知识、辅助报价与需求澄清、降低培训成本。
- 覆盖场景：售前咨询、需求澄清、价格讨论、进度沟通、售后追问、内部培训与复盘。

---

## 第4节：数据需求描述
- 数据来源：D:\AI_Projects\TelegramChatHistory\Original 中的 Telegram 导出文件（含对话、媒体占位、时间戳与参与者信息）。
- 数据类型与结构（业务视角）：会话→消息→内容/附件占位→元信息（时间、参与方、潜在客户标识）；派生结构包括主题标签、意图标签、问答对、知识条目与术语映射。
- 数据量级估算：
  - 初期：消息总数 ≤ 100,000；
  - 单消息正文：平均 30–200 字；
  - 结构化产物：主题标签 ≤ 200 个，知识条目 ≤ 5,000 条。
- 数据留存与可追溯：所有知识条目需保留来源会话 ID、消息时间戳与责任人，可按主题/客户导出审计副本与训练白名单。

---

## 第5节：性能与质量要求
- 性能指标（量化）：
  - 全量整理（10 万消息规模）：完成时间 ≤ 30 分钟；
  - 增量更新（5,000 消息）：完成时间 ≤ 5 分钟；
  - 日常问答检索：P95 响应时间 ≤ 800 ms；
  - 并发问答峰值能力：≥ 50 请求/秒（连续 5 分钟）。
- 质量指标（量化）：
  - 噪声剔除准确率 ≥ 95%；
  - 主题/意图归类一致性（人工抽样一致率）≥ 90%；
  - 业务要点抽取召回率 ≥ 85%，精确率 ≥ 90%；
  - 知识条目与来源对齐的可追溯覆盖率 = 100%。

---

## 第6节：异常场景与边界条件
- 异常情况列举：
  - 导入文件缺失/损坏/格式不符；
  - 消息时间戳异常或跨时区混乱；
  - 大段媒体占位导致对话断裂；
  - 同一主题下结论相互矛盾；
  - 涉及个人隐私或敏感商业信息的片段。
- 处理要求：
  - 导入阶段应生成错误清单与可重试批次；
  - 时间线异常需统一到配置的业务时区并出具校正常规；
  - 媒体占位处以“上下文拼接 + 标注来源”的方式保留可读性；
  - 对于矛盾结论，需生成“冲突条目清单”并要求人工仲裁；
  - 涉敏片段须在知识条目中打隐私标签并限制对外可见范围。

---

## 第7节：安全与合规要求
- 数据敏感性分级：对话中涉及个人身份、联系方式、付款信息、内部价格策略等均标记为受限级；
- 访问控制：按“最小可见”原则对知识条目授权；
- 隐私保护：对导出的训练数据与报告进行脱敏处理，保留最小必要字段；
- 审计留痕：导入、整理、导出与问答检索行为均需记录操作人、时间与范围。

---

## 第8节：可观测性要求
- 关键业务事件：导入开始/结束、批次失败、噪声剔除统计、主题/意图分布、冲突条目产生、增量更新完成、问答检索命中；
- 需监控的业务指标：
  - 导入成功率、每批次用时、失败原因 TopN；
  - 噪声剔除比例、抽取召回与精确、问答命中率与平均响应时间；
  - 主题/意图覆盖度与长期漂移趋势；
- 运行报告：提供周报与月报模板，包含上述指标的趋势图与异常摘要。

---

## 第9节：范围与非目标
- 范围：聊天数据清洗与知识沉淀、问答素材与术语表构建、检索与报告输出、风格与合规约束定义。
- 非目标：不直接面向客户自动发送消息；不进行价格自动决策；不替代法务与合规审批；不承诺外部系统对接。

---

## 第10节：项目约束说明
- 技术栈强制与禁止（来自项目规范）：
  - 强制要求：运行时、统一配置、异步 I/O、一致的日志与后台任务编排、消息投递至少一次语义、观测性与密钥管理等；
  - 禁止项：阻塞式 I/O、在应用进程中创建全局线程、绕过消息失败队列、将临时存储充当持久数据库等；
- 对需求的影响：
  - 本需求仅提出业务目标与可验收标准，不指定实现方式；
  - 任何需要长时间运行的整理与报告生成应视为后台作业，由下游技术方案选择合适的执行与调度手段；
  - 可观测性与审计留痕为强制要求，所有导入/整理/检索需形成可追踪记录；
  - 访问控制与隐私脱敏不可省略，涉及敏感字段的知识条目必须受限访问。

---

## 第11节：交付与验收标准
- 交付物清单：
  - 结构化知识库（主题/意图/要点/问答/术语映射）；
  - 增量更新流程与操作手册；
  - 周/月度可观测性报告模板与示例；
  - 合规与风格约束清单；
  - 验收数据包（抽样数据、比对报告与结论）。
- 验收清单（可测试/可验证）：
  - 完成一次全量整理并输出质量指标与报告；
  - 在新增一批对话后完成增量并通过一致性校验；
  - 任意抽样 100 条消息，噪声剔除准确率 ≥ 95%；
  - 从知识条目反查原始来源，追溯覆盖率 = 100%；
  - 问答检索 P95 响应时间 ≤ 800 ms，峰值 ≥ 50 请求/秒。

---

附录A：输入/输出路径约定（供实施阶段参考）
- 输入根路径：D:\AI_Projects\TelegramChatHistory\Original
- 输出工作区：D:\AI_Projects\TelegramChatHistory\Workspace

